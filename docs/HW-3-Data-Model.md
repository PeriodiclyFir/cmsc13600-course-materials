# HW 3. Data Model
A relational data model is a way of structuring data in a database using tables, where each table represents a specific entity or concept. The data in a relational database is organized into tables that have rows and columns. Each row in a table represents a single record or instance of the entity being modeled, while each column represents an attribute or characteristic of that entity.

The relational data model is based on the principles of mathematical set theory and emphasizes the relationships between tables. In a relational database, these relationships are established through the use of foreign keys, which link records in one table to records in another table.

The main advantages of the relational data model are its simplicity, flexibility, and scalability. It allows for efficient storage and retrieval of large amounts of data and supports complex queries and transactions. The relational model is also widely used in industry and has become a standard for managing data in many applications, from simple spreadsheets to complex enterprise systems.

## Reading
Before you begin, you should read up on Django Models [https://docs.djangoproject.com/en/4.1/topics/db/models/], and Django Model Forms [https://docs.djangoproject.com/en/4.1/topics/forms/modelforms/].
Django models define the basic data model which is then compiled to the database. Django Model Forms allow the front end to populate such a database.

## Functionality (in English)
An important part of data engineering development is to interpret and understand application specifications. Here we spec out what the attendance chip application needs to support.

1. **User Management** There will be two classes of users: students and instructors. 
   a. Students represent students who can take one or more course. Students have a student id number.
   b. Instructors represent course staff who can teach one or more course. Instructors have an instructor id number.
   c. The application should be able to add new students and instructors.
   
2. **Course Management** For simplicity, courses have only a single instructor, but instructors can teach multiple courses.
   a. Each course should have a course id number.
   b. The application should allow students to join a particular course.
   c. The application should allow an instructor to display a QR code for a particular course
   d. The application should create a custom upload dialog for pictures of the QR code.

3. **Post-hoc Analytics** All of the data in (1) and (2) should be stored in the database.
   a. Offline, we should be able to determine whether a student uploaded a valid QR code for a particular lecture
   b. Offline, we should be able to determine attendance for a particular lecture.

## Data Model
Don't worry about implementing the full functionality yet. Instead we want you to think about the data model, what data needs to be stored and how it needs to be linked. You will edit the file `models.py` to have your data model. 

At a high level here are all the entities that you have:
* Users (of type either instructor or students)
* Courses (instructors teach these and students take these)
* Lectures (particular days for each course)
* QR Codes (uploads that are associated with lectures and students)

### Implementing the Data Model (TODO)
Your data model should implment these associations between these entities. Complete `models.py` with this data model. After completion run:
```
(venv) $ python manage.py makemigrations app
(venv) $ python manage.py migrate
```
This should run with no errors if your model is consistent. 

Sometimes the database will end up in a weird state if you make contradictory changes. In this assignment, it is safe to just remove the database file and re-run the code above.
```
rm -Rf migrations db.sqlite 
```

While this is an open-ended assignment, here are some things to think about.

1. Before you write any code, draw out the ER diagram. Note, you may have to create helper tables to implement certain types of relationships.
2. Start with the User/Courses tables and specify those in Django. These are the primary entities you need to think about.
3. Then, think about Lectures.
4. Then, finally think about QR Codes both how they are created and how they are uploaded. Hint, again you may need multiple tables here.
   
Save your ER diagram in `app/docs/my-data-model.png`. It's fine if it's hand-drawn! This will be useful for you and us to understand what you are doing.

## Ask Chat-GPT to generate a data model (TODO)
Chat-GPT can generate suprisingly good data models. Experiemnt with Chat-GPT to generate a data model. Use the text in this doc and the readme to generate a prompt. Ask it to do it as a django models.py file or as more abstract sql tables.
https://chat.openai.com/chat

Write your findings in a file called `app/gpt.txt`
1. How does your data model differ from the one generated by chat-gpt? Why is your's better (on any axis: simpler, more complete, easier to implement, etc.)?
2. Visualize the chat-gpt data model in `app/docs/gpt-model.png`.

## Deploying Your Model (TODO)
Now, we will go over the steps for deploying your model too the database.

1. Then create the migrations:
```
$ python manage.py makemigrations app
```

2. Deploy the migrations
```
$ python manage.py migrate
```

You can confirm the migrations worked by running sqlite. I added one table "test", and you see it show up below as `app_test`:
```
(venv) sanjays-MacBook-Air-2:attendancechimp sanjaykrishnan$ sqlite3 db.sqlite3 
SQLite version 3.39.4 2022-09-07 20:51:41
Enter ".help" for usage hints.
sqlite> .tables
app_test                    auth_user_user_permissions
auth_group                  django_admin_log          
auth_group_permissions      django_content_type       
auth_permission             django_migrations         
auth_user                   django_session            
auth_user_groups   
```
## Submission
Follow the submission instructions of the previous weeks. There should be a pull request with: models.py, gpt.txt, my-data-model.png, gpt-model.png.

## Grading
1 pt for each of the 4 files that need to be included in the PR.

